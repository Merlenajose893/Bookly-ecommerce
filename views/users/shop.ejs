<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Bookly - Bootstrap Shop Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet"> 

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    <!-- SweetAlert2 CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

    <style>
        .product-card {
            border: none;
            transition: all 0.3s ease;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
        }
        
        .product-card:hover .product-img-wrapper img {
            transform: scale(1.05);
        }
        
        .product-img-wrapper {
            background-color: #f8f9fa;
            border-radius: 8px 8px 0 0;
        }
        
        .btn {
            padding: 0.5rem 1rem;
            border-radius: 6px;
        }
        
        .btn-primary {
            background-color: #0d6efd;
            border-color: #0d6efd;
        }
        
        .btn-outline-primary {
            color: #0d6efd;
            border-color: #0d6efd;
        }
        
        .btn-outline-primary:hover {
            background-color: #0d6efd;
            color: white;
        }
        
        .filter-section {
            border-bottom: 1px solid #dee2e6;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
        }
        .custom-control-input:checked ~ .custom-control-label::before {
            background-color: #007bff;
            border-color: #007bff;
        }
        .badge {
            padding: 0.5em 0.75em;
            background-color: #f8f9fa;
        }
        .sort-select {
            width: 100%;
            margin-bottom: 1.5rem;
        }
        .filter-section {
    background: #ffffff;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    margin-bottom: 30px;
}

.filter-section h5 {
    color: #2d3748;
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 20px;
    padding-bottom: 12px;
    border-bottom: 2px solid #edf2f7;
}

.custom-control {
    position: relative;
    padding: 12px 16px;
    margin-bottom: 8px;
    border-radius: 8px;
    transition: all 0.2s ease;
}

.custom-control:hover {
    background-color: #f7fafc;
}

.custom-control-input {
    position: absolute;
    opacity: 0;
    z-index: -1;
}

.custom-control-label {
    position: relative;
    margin-bottom: 0;
    padding-left: 28px;
    cursor: pointer;
    color: #4a5568;
    font-size: 15px;
    display: block;
    transition: color 0.2s ease;
}

.custom-control-label:before {
    content: '';
    position: absolute;
    left: 0;
    top: 2px;
    width: 20px;
    height: 20px;
    border: 2px solid #cbd5e0;
    border-radius: 4px;
    background-color: #fff;
    transition: all 0.2s ease;
}

.custom-control-label:after {
    content: '';
    position: absolute;
    left: 7px;
    top: 7px;
    width: 6px;
    height: 10px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
    opacity: 0;
    transition: opacity 0.2s ease;
}

.custom-control-input:checked ~ .custom-control-label:before {
    border-color: #4299e1;
    background-color: #4299e1;
}

.custom-control-input:checked ~ .custom-control-label:after {
    opacity: 1;
}

.custom-control-input:focus ~ .custom-control-label:before {
    box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.15);
}

.custom-control-label:hover {
    color: #2d3748;
}

#applyFilters {
    background-color: #4299e1;
    border: none;
    padding: 10px 24px;
    border-radius: 6px;
    font-weight: 500;
    color: white;
    transition: all 0.2s ease;
    margin-top: 16px;
    width: 100%;
}

#applyFilters:hover {
    background-color: #3182ce;
    transform: translateY(-1px);
    box-shadow: 0 4px 6px rgba(66, 153, 225, 0.1);
}

#applyFilters:active {
    transform: translateY(0);
}

/* Add responsive styles */
@media (max-width: 768px) {
    .filter-section {
        padding: 16px;
    }
    
    .custom-control {
        padding: 10px 12px;
    }
    
    .custom-control-label {
        font-size: 14px;
    }
}
.filter-section {
    background: #ffffff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    margin-bottom: 24px;
}

.filter-section h5 {
    color: #2d3748;
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 2px solid #edf2f7;
}

.sort-select {
    width: 100%;
    padding: 12px 16px;
    font-size: 15px;
    color: #4a5568;
    background-color: #f8fafc;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    cursor: pointer;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%234a5568' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 16px;
    transition: all 0.2s ease;
}

.sort-select:hover {
    border-color: #cbd5e0;
    background-color: #fff;
}

.sort-select:focus {
    outline: none;
    border-color: #4299e1;
    box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.15);
    background-color: #fff;
}

.sort-select option {
    padding: 12px;
    background-color: #fff;
    color: #2d3748;
}

/* Add custom styling for the options dropdown */
.sort-select option:checked {
    background-color: #4299e1;
    color: #fff;
}

/* Responsive styles */
@media (max-width: 768px) {
    .filter-section {
        padding: 16px;
    }

    .sort-select {
        padding: 10px 14px;
        font-size: 14px;
    }
}

/* For Firefox */
.sort-select {
    scrollbar-width: thin;
    scrollbar-color: #cbd5e0 #f8fafc;
}

/* For Chrome/Safari/Edge */
.sort-select::-webkit-scrollbar {
    width: 8px;
}

.sort-select::-webkit-scrollbar-track {
    background: #f8fafc;
    border-radius: 4px;
}

.sort-select::-webkit-scrollbar-thumb {
    background-color: #cbd5e0;
    border-radius: 4px;
    border: 2px solid #f8fafc;
}

.sort-select::-webkit-scrollbar-thumb:hover {
    background-color: #a0aec0;
}
.wishlist-toggle {
    transition: all 0.3s ease;
    border: none;
}

.wishlist-toggle:hover {
    transform: scale(1.1);
}

.wishlist-toggle.in-wishlist .wishlist-icon {
    color: #72353b;
    font-weight: 900;
}

.wishlist-toggle .wishlist-icon {
    color: #6c757d;
}
.wishlist-btn {
    z-index: 10;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.wishlist-btn:hover {
    transform: scale(1.1);
}

.wishlist-btn i {
    transition: all 0.3s ease;
}

.wishlist-btn:hover i {
    color: #dc3545 !important;
}
    
        </style>
</head>

<body>
    <!-- Topbar Start -->
    <div class="container-fluid">
        <div class="row bg-secondary py-2 px-xl-5">
            <div class="col-lg-6 d-none d-lg-block">
                <div class="d-inline-flex align-items-center">
                    <a class="text-dark" href="">FAQs</a>
                    <span class="text-muted px-2">|</span>
                    <a class="text-dark" href="">Help</a>
                    <span class="text-muted px-2">|</span>
                    <a class="text-dark" href="">Support</a>
                </div>
            </div>
            <div class="col-lg-6 text-center text-lg-right">
                <div class="d-inline-flex align-items-center">
                    <a class="text-dark px-2" href="">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a class="text-dark px-2" href="">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a class="text-dark px-2" href="">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    <a class="text-dark px-2" href="">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a class="text-dark pl-2" href="">
                        <i class="fab fa-youtube"></i>
                    </a>
                </div>
            </div>
        </div>
        <div class="row align-items-center py-3 px-xl-5">
            <div class="col-lg-3 d-none d-lg-block">
                <a href="" class="text-decoration-none">
                    <h1 class="m-0 display-5 font-weight-semi-bold"><span class="text-primary font-weight-bold border px-3 mr-1">B</span>OOKLY</h1>
                </a>
            </div>
            <div class="col-lg-6 col-6 text-left">
                <form action="/shop" method="GET" class="mb-4">
                    <div class="input-group">
                      <input
                        type="text"
                        name="search"
                        class="form-control"
                        placeholder="Search by title or author..."
                        value="<%= searchQuery %>"
                      />
               <button type="submit" style="
    background-color: #D19C97;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 5px;
    font-size: 14px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.2s;
">
     Search
</button>
<a href="/shop" class="btn btn-secondary" style="margin-left: 10px;">Clear</a>

                    </div>
                  </form>
            </div>
            <div class="col-lg-3 col-6 text-right">
                <a href="/wishlist" class="btn border">
                    <i class="fas fa-heart text-primary"></i>
                    <span class="badge">0</span>
                </a>
                <a href="/cart" class="btn border">
                    <i class="fas fa-shopping-cart text-primary"></i>
                    <span class="badge">0</span>
                </a>
            </div>
        </div>
    </div>
    <!-- Topbar End -->


    <!-- Navbar Start -->
    <div class="container-fluid">
        <div class="row border-top px-xl-5">
            <div class="col-lg-3 d-none d-lg-block">
                <a class="btn shadow-none d-flex align-items-center justify-content-between bg-primary text-white w-100" data-toggle="collapse" href="#navbar-vertical" style="height: 65px; margin-top: -1px; padding: 0 30px;">
                    <h6 class="m-0">Categories</h6>
                    <i class="fa fa-angle-down text-dark"></i>
                </a>
                <nav class="collapse position-absolute navbar navbar-vertical navbar-light align-items-start p-0 border border-top-0 border-bottom-0 bg-light" id="navbar-vertical" style="width: calc(100% - 30px); z-index: 1;">
                    <div class="navbar-nav w-100 overflow-hidden" style="height: 410px">
                        <div class="nav-item dropdown">
                            <a href="#" class="nav-link" data-toggle="dropdown">Genres <i class="fa fa-angle-down float-right mt-1"></i></a>
                            <div class="dropdown-menu position-absolute bg-secondary border-0 rounded-0 w-100 m-0">
                                <% if (genres && genres.length) { %>
                                    <% genres.forEach(genre => { %>
                                        <% if (!genre.isDeleted) { %> <!-- Check if genre is not deleted -->
                                            <a href="/genres/<%= genre._id %>" class="dropdown-item">
                                                <%= genre.name %>
                                            </a>
                                        <% } %>
                                    <% }); %>
                                <% } else { %>
                                    <p class="dropdown-item">No genres available</p>
                                <% } %>
                        
                    </div>
                </nav>
            </div>
            <div class="col-lg-9">
                <nav class="navbar navbar-expand-lg bg-light navbar-light py-3 py-lg-0 px-0">
                    <a href="" class="text-decoration-none d-block d-lg-none">
                        <h1 class="m-0 display-5 font-weight-semi-bold"><span class="text-primary font-weight-bold border px-3 mr-1">E</span>Shopper</h1>
                    </a>
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
                        <div class="navbar-nav mr-auto py-0">
                            <a href="/" class="nav-item nav-link">Home</a>
                            <a href="/shop" class="nav-item nav-link active">Shop</a>
                            <!-- <a href="detail.html" class="nav-item nav-link">Shop Detail</a> -->
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Pages</a>
                                <div class="dropdown-menu rounded-0 m-0">
                                    <a href="/cart" class="dropdown-item">Shopping Cart</a>
                                    <a href="/checkout" class="dropdown-item">Checkout</a>
                                </div>
                            </div>
                            <a href="/contact" class="nav-item nav-link">Contact</a>
                        </div>
                        
                    </div>
                </nav>
            </div>
        </div>
    </div>
    <!-- Navbar End -->


    <!-- Page Header Start -->
    <div class="container-fluid bg-secondary mb-5">
        <div class="d-flex flex-column align-items-center justify-content-center p-4" style="min-height: 100px; padding: 2rem">
            <h1 class="font-weight-semi-bold text-uppercase mb-3">Our Shop</h1>
            <div class="d-inline-flex">
                <p class="m-0"><a href="">Home</a></p>
                <p class="m-0 px-2">-</p>
                <p class="m-0">Shop</p>
            </div>
        </div>
    </div>
    <!-- Page Header End -->


    <!-- Shop Start -->
    <div class="container-fluid pt-5">
        <div class="row px-xl-5">
            <!-- Shop Sidebar Start -->
            <div class="col-lg-3 col-md-12">
                <!-- Sort By Start -->
                <div class="filter-section">
                    <h5 class="font-weight-semi-bold mb-4">Sort By</h5>
                    <select class="form-select sort-select" id="sortOptions">
                        <option value="featured" selected>Featured</option>
                        <option value="popularity">Popularity</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="rating">Average Rating</option>
                        <option value="new">New Arrivals</option>
                        <option value="name-asc">Name: A to Z</option>
                        <option value="name-desc">Name: Z to A</option>
                    </select>
                </div>
                <!-- Sort By End -->
        
                <!-- Price Start -->
               
                <!-- Price End -->
        
                <!-- Genre Start -->
                <div class="filter-section">
                    <h5 class="font-weight-semi-bold mb-4">Filter by genre</h5>
                    <form id="filterForm" action="/shop" method="GET">
                        <% genres.forEach(genre => { %>
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" 
  id="genre-<%= genre._id %>" 
  name="genres" 
  value="<%= genre.name %>"
  <%= (Array.isArray(selectedGenres) && selectedGenres.includes(genre.name)) ? "checked" : "" %> >

                                <label class="custom-control-label" for="genre-<%= genre._id %>"><%= genre.name %></label>
                            </div>
                        <% }) %>
                
                        <button type="submit" class="btn btn-primary mt-3">Apply Filters</button>
                        <button type="button" id="clearFilters" class="btn btn-secondary mt-3">Clear Filters</button>
                    </form>
                </div>
                
                
                <!-- Genre End -->
        
                <!-- Apply Filters Button -->
               
            </div>
        
            <!-- Shop Sidebar End -->


            <!-- Shop Product Start -->
            <div class="col-lg-9 col-md-12">
                <div class="row pb-3">
                    <div class="col-12 pb-1">
                        <div class="d-flex align-items-center justify-content-between mb-4">
                            <form action="/shop" method="GET" class="mb-4">
                                <div class="input-group">
                                  <input
                                    type="text"
                                    name="search"
                                    class="form-control"
                                    placeholder="Search by name"
                                    value="<%= searchQuery %>"
                                  />
                                  <!-- <button type="submit" >Search</button> -->
                                  <button type="submit" style="
                                  background-color: #D19C97;
                                  color: #1c1c1c;
                                  border: none;
                                  padding: 8px 16px;
                                  border-radius: 5px;
                                  font-size: 14px;
                                  font-weight: normal;
                                  cursor: pointer;
                                  transition: background-color 0.3s, transform 0.2s;
                              ">
                                   Search
                              </button>
                              
                                </div>
                              </form>
                           
                        </div>
                    </div>
                    <% books.forEach(function(book) { %>
                        <div class="col-lg-4 col-md-6 col-sm-12 pb-4">
                            <div class="card h-100 product-card shadow-sm hover:shadow-lg transition-all duration-300">
                                <div class="position-relative">
                                    <button class="btn wishlist-btn position-absolute top-0 end-0 m-2 bg-white rounded-circle p-2 shadow-sm" 
                                    onclick="toggleWishlist('<%= book._id %>')"
                                    data-book-id="<%= book._id %>"
                                    <%= book.quantity === 0 ? 'disabled' : '' %>>
                                <i class="fa-heart fa-regular text-danger" style="font-size: 20px;"></i>
                            </button>
                            

                                    <!-- Ribbon for sales price if available -->
                                    <% if (book.salesPrice < book.regularPrice) { %>
                                        <div class="position-absolute top-0 right-0 bg-danger text-white px-3 py-1 m-2 rounded-pill">
                                            Sale
                                        </div>
                                    <% } %>
                                    
                                    <!-- Book Image -->
                                    <div class="product-img-wrapper position-relative overflow-hidden" style="aspect-ratio: 3/4; max-width: 200px; max-height: 260px;">
                                        <a href="/book/<%= book._id %>">
                                        <% if (book.images && book.images.length > 0) { %>
                                                <img class="position-absolute w-100 h-100" 
                                                     src="/uploads/<%= book.images[0].split('/').pop() %>" 
                                                     alt="<%= book.title %>"
                                                     style="object-fit: cover; transition: transform 0.3s ease;">
                                            
                                        <% } else { %>
                                       
                                                <img class="position-absolute w-100 h-100" 
                                                     src="/path/to/placeholder.jpg" 
                                                     alt="Placeholder Image"
                                                     style="object-fit: cover; transition: transform 0.3s ease;">
                                            </a>
                                        <% } %>
                                    </div>
                                </div>
                    
                                <!-- Book Details -->
                                <div class="card-body d-flex flex-column justify-content-between p-4">
                                    <div>
                                        <!-- Offer Badge -->
                                        <% if (book.appliedOffer) { %>
                                            <div class="mb-2">
                                                <span class="badge bg-danger">
                                                    <% if (book.appliedOffer.discountType === 'percentage') { %>
                                                        <%= book.appliedOffer.discountValue %>% Off
                                                    <% } else { %>
                                                        ₹<%= book.appliedOffer.discountValue %> Off
                                                    <% } %>
                                                </span>
                                            </div>
                                        <% } %>
                                
                                        <h5 class="card-title mb-2 text-truncate fw-bold"><%= book.title %></h5>
                                        <p class="text-muted mb-3 fs-6"><%= book.author %></p>
                                        
                                        <p class="fw-bold">
                                            <% if (book.quantity > 0) { %>
                                                <span class="text-success">Stock Left: <%= book.quantity %></span>
                                            <% } else { %>
                                                <span class="text-danger">Out of Stock</span>
                                            <% } %>
                                        </p>
                                
                                        <!-- Updated Price Section -->
                                        <div class="d-flex align-items-center gap-2 mb-3">
                                            <h6 class="fw-bold text-primary mb-0">
                                                ₹<%= book.finalPrice %>
                                            </h6>
                                            <% if (book.finalPrice < book.regularPrice) { %>
                                                <h6 class="text-muted mb-0">
                                                    <del>₹<%= book.regularPrice %></del>
                                                </h6>
                                            <% } %>
                                        </div>
                                    </div>
                                
                                    <!-- Action Buttons -->
                                    <div class="d-flex justify-content-between align-items-center mt-3">
                                        <a href="/book/<%= book._id %>" class="text-dark">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                
                                        <% if (book.quantity > 0) { %>
                                            <form action="/cart" method="POST" class="mb-0">
                                                <input type="hidden" name="productId" value="<%= book._id %>">
                                                <button type="submit" class="btn btn-link p-0 border-0">
                                                    <i class="fas fa-shopping-cart text-dark"></i>
                                                </button>
                                            </form>
                                        <% } else { %>
                                            <button class="btn btn-secondary btn-sm" disabled>
                                                <i class="fas fa-ban me-2"></i>Out of Stock
                                            </button>
                                        <% } %>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                    
                    <div class="col-12 pb-1">
                        <nav aria-label="Page navigation">
                          <ul class="pagination justify-content-center mb-3">
                            <!-- Previous Button -->
                            <% if (currentPage > 1) { %>
                              <li class="page-item">
                                <a class="page-link" href="?page=<%= currentPage - 1 %>&sort=<%=sort%>" aria-label="Previous">
                                  <span aria-hidden="true">&laquo;</span>
                                  <span class="sr-only">Previous</span>
                                </a>
                              </li>
                            <% } else { %>
                              <li class="page-item disabled">
                                <a class="page-link" href="#" aria-label="Previous">
                                  <span aria-hidden="true">&laquo;</span>
                                  <span class="sr-only">Previous</span>
                                </a>
                              </li>
                            <% } %>
                      
                            <!-- Page Numbers -->
                            <% for (let i = 1; i <= totalPages; i++) { %>
                              <li class="page-item <%= currentPage === i ? 'active' : '' %>">
                                <a class="page-link" href="?page=<%= i %>&sort=<%=sort%>"><%= i %></a>
                              </li>
                            <% } %>
                      
                            <!-- Next Button -->
                            <% if (currentPage < totalPages) { %>
                              <li class="page-item">
                                <a class="page-link" href="?page=<%= currentPage + 1 %>&sort=<%=sort%>" aria-label="Next">
                                  <span aria-hidden="true">&raquo;</span>
                                  <span class="sr-only">Next</span>
                                </a>
                              </li>
                            <% } else { %>
                              <li class="page-item disabled">
                                <a class="page-link" href="#" aria-label="Next">
                                  <span aria-hidden="true">&raquo;</span>
                                  <span class="sr-only">Next</span>
                                </a>
                              </li>
                            <% } %>
                          </ul>
                        </nav>
                      </div>
                      
                </div>
            </div>
            <!-- Shop Product End -->
        </div>
    </div>
    <!-- Shop End -->


    <!-- Footer Start -->
    <div class="container-fluid bg-secondary text-dark mt-5 pt-5">
        <div class="row px-xl-5 pt-5">
            <div class="col-lg-4 col-md-12 mb-5 pr-3 pr-xl-5">
                <a href="" class="text-decoration-none">
                    <h1 class="mb-4 display-5 font-weight-semi-bold"><span class="text-primary font-weight-bold border border-white px-3 mr-1">E</span>Shopper</h1>
                </a>
                <p>Dolore erat dolor sit lorem vero amet. Sed sit lorem magna, ipsum no sit erat lorem et magna ipsum dolore amet erat.</p>
                <p class="mb-2"><i class="fa fa-map-marker-alt text-primary mr-3"></i>123 Street, New York, USA</p>
                <p class="mb-2"><i class="fa fa-envelope text-primary mr-3"></i>info@example.com</p>
                <p class="mb-0"><i class="fa fa-phone-alt text-primary mr-3"></i>+012 345 67890</p>
            </div>
            <div class="col-lg-8 col-md-12">
                <div class="row">
                    <div class="col-md-4 mb-5">
                        <h5 class="font-weight-bold text-dark mb-4">Quick Links</h5>
                        <div class="d-flex flex-column justify-content-start">
                            <a class="text-dark mb-2" href="index.html"><i class="fa fa-angle-right mr-2"></i>Home</a>
                            <a class="text-dark mb-2" href="shop.html"><i class="fa fa-angle-right mr-2"></i>Our Shop</a>
                            <a class="text-dark mb-2" href="detail.html"><i class="fa fa-angle-right mr-2"></i>Shop Detail</a>
                            <a class="text-dark mb-2" href="cart.html"><i class="fa fa-angle-right mr-2"></i>Shopping Cart</a>
                            <a class="text-dark mb-2" href="checkout.html"><i class="fa fa-angle-right mr-2"></i>Checkout</a>
                            <a class="text-dark" href="contact.html"><i class="fa fa-angle-right mr-2"></i>Contact Us</a>
                        </div>
                    </div>
                    <div class="col-md-4 mb-5">
                        <h5 class="font-weight-bold text-dark mb-4">Quick Links</h5>
                        <div class="d-flex flex-column justify-content-start">
                            <a class="text-dark mb-2" href="index.html"><i class="fa fa-angle-right mr-2"></i>Home</a>
                            <a class="text-dark mb-2" href="shop.html"><i class="fa fa-angle-right mr-2"></i>Our Shop</a>
                            <a class="text-dark mb-2" href="detail.html"><i class="fa fa-angle-right mr-2"></i>Shop Detail</a>
                            <a class="text-dark mb-2" href="cart.html"><i class="fa fa-angle-right mr-2"></i>Shopping Cart</a>
                            <a class="text-dark mb-2" href="checkout.html"><i class="fa fa-angle-right mr-2"></i>Checkout</a>
                            <a class="text-dark" href="contact.html"><i class="fa fa-angle-right mr-2"></i>Contact Us</a>
                        </div>
                    </div>
                    <div class="col-md-4 mb-5">
                        <h5 class="font-weight-bold text-dark mb-4">Newsletter</h5>
                        <form action="">
                            <div class="form-group">
                                <input type="text" class="form-control border-0 py-4" placeholder="Your Name" required="required" />
                            </div>
                            <div class="form-group">
                                <input type="email" class="form-control border-0 py-4" placeholder="Your Email"
                                    required="required" />
                            </div>
                            <div>
                                <button class="btn btn-primary btn-block border-0 py-3" type="submit">Subscribe Now</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row border-top border-light mx-xl-5 py-4">
            <div class="col-md-6 px-xl-0">
                <p class="mb-md-0 text-center text-md-left text-dark">
                    &copy; <a class="text-dark font-weight-semi-bold" href="#">Your Site Name</a>. All Rights Reserved. Designed
                    by
                    <a class="text-dark font-weight-semi-bold" href="https://htmlcodex.com">HTML Codex</a><br>
                    Distributed By <a href="https://themewagon.com" target="_blank">ThemeWagon</a>
                </p>
            </div>
            <div class="col-md-6 px-xl-0 text-center text-md-right">
                <img class="img-fluid" src="img/payments.png" alt="">
            </div>
        </div>
    </div>
    <!-- Footer End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-primary back-to-top"><i class="fa fa-angle-double-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Contact Javascript File -->
    <script src="mail/jqBootstrapValidation.min.js"></script>
    <script src="mail/contact.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    <script>
        document.getElementById('sortOptions').addEventListener('change', function () {
            const selectedSort = this.value;
            const currentUrl = new URL(window.location.href);
            currentUrl.searchParams.set('sort', selectedSort);
            window.location.href = currentUrl.toString();
        });
        
       document.addEventListener('DOMContentLoaded', function () {
    document.getElementById('applyFilters').addEventListener('click', function (event) {
        event.preventDefault();
        const selectedGenres = [];
        document.querySelectorAll('input[type="checkbox"]:checked').forEach((checkbox) => {
            selectedGenres.push(checkbox.value);
        });

        if (selectedGenres.length === 0) {
            alert('Please select at least one genre');
            return;
        }

        const currentUrl = new URL(window.location.href);
        currentUrl.searchParams.set('genres', selectedGenres.join(','));
        window.location.href = currentUrl.toString();
    });
});

        </script>
        <!-- SweetAlert2 CDN -->
<!-- <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> -->

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    function toggleWishlist(bookId) {
        fetch(`/wishlist/add`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ bookId })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                Swal.fire({
                    icon: 'success',
                    title: 'Added to Wishlist!',
                    text: 'Book has been added successfully.',
                    showConfirmButton: false,
                    timer: 1500
                }).then(() => {
                    window.location.href = data.redirect; // ✅ Redirect after success
                });
            } else {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: data.message
                });
            }
        })
        .catch(error => {
            console.error("Error:", error);
            Swal.fire({
                icon: 'error',
                title: 'Error!',
                text: 'Something went wrong. Please try again.'
            });
        });
    }
</script>

<script>
    window.onload = function () {
      document.querySelector('input[name="search"]').value = '';
    };
  </script>
  <script>
    document.getElementById("clearFilters").addEventListener("click", function() {
        // Reset the form
        document.getElementById("filterForm").reset();

        // Uncheck all checkboxes manually (as reset() may not work in some cases)
        document.querySelectorAll("#filterForm input[type='checkbox']").forEach(checkbox => {
            checkbox.checked = false;
        });

        // Reset the sorting dropdown to default
        document.getElementById("sortOptions").value = "featured";

        // Optionally, submit the form after clearing
        document.getElementById("filterForm").submit();
    });
</script>
  

</body>

</html>