<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Bookly - Bootstrap Shop Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Free HTML Templates" name="keywords" />
    <meta content="Free HTML Templates" name="description" />

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon" />

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/elevatezoom-plus@1.1.20/dist/jquery.ez-plus.js"></script>

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="/css/style.css" rel="stylesheet" />
    <style>
      .zoom-container {
          position: relative;
          display: inline-block;
      }

      .zoom-image {
          width: 100%;
          height: auto;
          display: block;
      }

      .zoom-lens {
          position: absolute;
          border: 2px solid #000;
          width: 100px;
          height: 100px;
          background: rgba(255, 255, 255, 0.3);
          cursor: crosshair;
          display: none;
          pointer-events: none;
      }

      .zoom-result {
          position: absolute;
          width: 300px;
          height: 300px;
          border: 2px solid #000;
          display: none;
          background-repeat: no-repeat;
          background-color: white;
          top: 0;
          left: calc(100% + 10px);
          z-index: 1000;
      }
  </style>
  </head>

  <body>
    <!-- Topbar Start -->
    <div class="container-fluid">
      <div class="row bg-secondary py-2 px-xl-5">
        <div class="col-lg-6 d-none d-lg-block">
          <div class="d-inline-flex align-items-center">
            <a class="text-dark" href="">FAQs</a>
            <span class="text-muted px-2">|</span>
            <a class="text-dark" href="">Help</a>
            <span class="text-muted px-2">|</span>
            <a class="text-dark" href="">Support</a>
          </div>
        </div>
        <div class="col-lg-6 text-center text-lg-right">
          <div class="d-inline-flex align-items-center">
            <a class="text-dark px-2" href="">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a class="text-dark px-2" href="">
              <i class="fab fa-twitter"></i>
            </a>
            <a class="text-dark px-2" href="">
              <i class="fab fa-linkedin-in"></i>
            </a>
            <a class="text-dark px-2" href="">
              <i class="fab fa-instagram"></i>
            </a>
            <a class="text-dark pl-2" href="">
              <i class="fab fa-youtube"></i>
            </a>
          </div>
        </div>
      </div>
      <div class="row align-items-center py-3 px-xl-5">
        <div class="col-lg-3 d-none d-lg-block">
          <a href="" class="text-decoration-none">
            <h1 class="m-0 display-5 font-weight-semi-bold">
              <span class="text-primary font-weight-bold border px-3 mr-1">B</span>OOKLY
            </h1>
          </a>
        </div>
        <div class="col-lg-6 col-6 text-left">
          <form action="">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Search for products" />
              <div class="input-group-append">
                <span class="input-group-text bg-transparent text-primary">
                  <i class="fa fa-search"></i>
                </span>
              </div>
            </div>
          </form>
        </div>
        <div class="col-lg-3 col-6 text-right">
          <a href="" class="btn border">
            <i class="fas fa-heart text-primary"></i>
            <span class="badge">0</span>
          </a>
          <a href="" class="btn border">
            <i class="fas fa-shopping-cart text-primary"></i>
            <span class="badge">0</span>
          </a>
        </div>
      </div>
    </div>
    <!-- Topbar End -->

    <!-- Navbar Start -->
    <div class="container-fluid">
      <div class="row border-top px-xl-5">
        <div class="col-lg-3 d-none d-lg-block">
          <a
            class="btn shadow-none d-flex align-items-center justify-content-between bg-primary text-white w-100"
            data-toggle="collapse"
            href="#navbar-vertical"
            style="height: 65px; margin-top: -1px; padding: 0 30px"
          >
            <h6 class="m-0">Categories</h6>
            <i class="fa fa-angle-down text-dark"></i>
          </a>
          <nav class="collapse position-absolute navbar navbar-vertical navbar-light align-items-start p-0 border border-top-0 border-bottom-0 bg-light" id="navbar-vertical" style="width: calc(100% - 30px); z-index: 1;">
            <div class="navbar-nav w-100 overflow-hidden" style="height: 410px">
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link" data-toggle="dropdown">Genres <i class="fa fa-angle-down float-right mt-1"></i></a>
                    <div class="dropdown-menu position-absolute bg-secondary border-0 rounded-0 w-100 m-0">
                        <% if (genres && genres.length) { %>
                            <% genres.forEach(genre => { %>
                                <% if (!genre.isDeleted) { %> <!-- Check if genre is not deleted -->
                                    <a href="/genres/<%= genre._id %>" class="dropdown-item">
                                        <%= genre.name %>
                                    </a>
                                <% } %>
                            <% }); %>
                        <% } else { %>
                            <p class="dropdown-item">No genres available</p>
                        <% } %>
                
            </div>
        </nav>
        </div>
        <div class="col-lg-9">
          <nav class="navbar navbar-expand-lg bg-light navbar-light py-3 py-lg-0 px-0">
            <a href="" class="text-decoration-none d-block d-lg-none">
              <h1 class="m-0 display-5 font-weight-semi-bold">
                <span class="text-primary font-weight-bold border px-3 mr-1">B</span>OOKLY
              </h1>
            </a>
            <button
              type="button"
              class="navbar-toggler"
              data-toggle="collapse"
              data-target="#navbarCollapse"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
              <div class="navbar-nav mr-auto py-0">
                <a href="/" class="nav-item nav-link">Home</a>
                <a href="/shop" class="nav-item nav-link">Shop</a>
                <a href="/detail" class="nav-item nav-link active">Shop Detail</a>
                <div class="nav-item dropdown">
                  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Pages</a>
                  <div class="dropdown-menu rounded-0 m-0">
                    <a href="/cart" class="dropdown-item">Shopping Cart</a>
                    <a href="/checkout" class="dropdown-item">Checkout</a>
                  </div>
                </div>
                <a href="/contact" class="nav-item nav-link">Contact</a>
              </div>
             
            </div>
          </nav>
        </div>
      </div>
    </div>
    <!-- Navbar End -->

    <!-- Page Header Start -->
    <div class="container-fluid bg-secondary mb-5">
      <div
        class="d-flex flex-column align-items-center justify-content-center"
        style="min-height: 300px"
      >
        <h1 class="font-weight-semi-bold text-uppercase mb-3">Book Detail</h1>

        <div class="d-inline-flex">
          <p class="m-0"><a href="">Home</a></p>
          <p class="m-0 px-2">-</p>
          <p class="m-0">Book Detail</p>
        </div>
      </div>
    </div>
    <!-- Page Header End -->

    <!-- Shop Detail Start -->
    <div class="container-fluid py-5">
      <div class="row px-xl-5">
        <div class="col-lg-5 pb-5">
          <div class="zoom-container position-relative" style="width: 80%; height: auto">
            <img
              id="main-image"
              class="zoom-image w-100 h-100"
              src="/uploads/<%= book.images[0].split('/').pop() %>"
              alt="<%= book.title %> Cover"
              style="cursor: zoom-in"
            />
            <div
              id="zoom-lens"
              style="
                position: absolute;
                border: 1px solid #000;
                width: 100px;
                height: 100px;
                opacity: 0.5;
                background-color: rgba(255, 255, 255, 0.5);
                display: none;
                pointer-events: none;
              "
            ></div>
          </div>
          <div
            id="zoom-result"
            style="
              position: absolute;
              width: 100%;
              height: 50%;
              border: 1px solid #000;
              background-repeat: no-repeat;
              background-size: 200%;
              display: none;
              z-index: 1000;
            "
          ></div>
          <br>
          <div class="book-images mb-4">
            <!-- <br><br><br> -->
            <h5 class="fw-bold mb-3" style="margin-top: 100px; ">Images of the Book</h5>
            <div class="image-gallery"
                 style="
                    display: flex;
                    gap: 12px;
                    flex-wrap: wrap;
                    justify-content: flex-start;
                 ">
                <% if (book.images && book.images.length > 0) { %>
                    <% book.images.forEach(function(image, index) { %>
                        <div class="image-thumbnail"
                             onclick="showImageModal('/uploads/<%= image.split('/').pop() %>')"
                             style="
                                width: 120px;
                                height: 120px;
                                border-radius: 8px;
                                overflow: hidden;
                                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                                transition: all 0.2s ease;
                                cursor: pointer;
                                position: relative;
                             "
                             onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 4px 8px rgba(0, 0, 0, 0.15)';"
                             onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 2px 4px rgba(0, 0, 0, 0.1)';"
                        >
                            <img src="/uploads/<%= image.split('/').pop() %>"
                                 alt="Book Image <%= index + 1 %>"
                                 style="width: 100%; height: 100%; object-fit: cover;"
                            />
                            <div class="image-overlay"
                                 style="
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    width: 100%;
                                    height: 100%;
                                    background: rgba(0, 0, 0, 0);
                                    transition: background 0.2s ease;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    opacity: 0;
                                 "
                                 onmouseover="this.style.background='rgba(0, 0, 0, 0.3)'; this.style.opacity='1';"
                                 onmouseout="this.style.background='rgba(0, 0, 0, 0)'; this.style.opacity='0';"
                            >
                                <i class="fas fa-search-plus" style="color: white; font-size: 18px;"></i>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <div class="no-images"
                         style="
                            width: 100%;
                            padding: 20px;
                            text-align: center;
                            color: #777;
                            font-style: italic;
                            background-color: #f8f8f8;
                            border-radius: 8px;
                         "
                    >
                        <i class="fas fa-image me-2"></i>No images available for this book.
                    </div>
                <% } %>
            </div>
        </div>
        </div>

        <div class="col-lg-7 pb-5">
          <!-- Title and Rating Section -->
          <div class="p-4 mb-4 border-bottom">
              <h2 class="font-weight-bold mb-3"><%= book.title %></h2>
              <div class="d-flex align-items-center gap-2">
                  <div class="text-warning">
                      <% for (let i = 0; i < Math.floor(book.rating); i++) { %>
                          <i class="fas fa-star"></i>
                      <% } %>
                      <% if (book.rating % 1 !== 0) { %>
                          <i class="fas fa-star-half-alt"></i>
                      <% } %>
                      <% for (let i = Math.floor(book.rating); i < 5; i++) { %>
                          <i class="far fa-star"></i>
                      <% } %>
                  </div>
                  <span class="text-muted">(<%= book.reviews %> Reviews)</span>
              </div>
          </div>
      
          <!-- Price and Stock Section -->
          <div class="p-4 mb-4 border-bottom">
              <div class="d-flex align-items-center justify-content-between">
                  <div>
                      <% if (book.salesPrice && book.salesPrice < book.regularPrice) { %>
                          <h3 class="mb-0">
                              <span class="text-danger me-2"><del>₹<%= book.regularPrice.toFixed(2) %></del></span>
                              <span class="text-success">₹<%= book.salesPrice.toFixed(2) %></span>
                          </h3>
                      <% } else { %>
                          <h3 class="mb-0">₹<%= book.regularPrice.toFixed(2) %></h3>
                      <% } %>
                  </div>
                  <div>
                      <% if (book.quantity === 0) { %>
                          <span class="badge bg-danger p-2">Out of Stock</span>
                      <% } else if (book.quantity < 5) { %>
                          <span class="badge bg-warning p-2">Only <%= book.quantity %> left!</span>
                      <% } else { %>
                          <span class="badge bg-success p-2"><%= book.quantity %> in stock</span>
                      <% } %>
                  </div>
              </div>
          </div>
      
          <!-- Book Details Section -->
          <div class="p-4 mb-4 border-bottom">
              <h5 class="fw-bold mb-4">Book Details</h5>
              <div class="row g-3">
                  <div class="col-md-6">
                      <p class="mb-2"><i class="fas fa-barcode me-2"></i><strong>ISBN:</strong> <%= book.isbn %></p>
                      <p class="mb-2"><i class="fas fa-user me-2"></i><strong>Author:</strong> <%= book.author %></p>
                      <p class="mb-2"><i class="fas fa-building me-2"></i><strong>Publisher:</strong> <%= book.publisher %></p>
                  </div>
                  <div class="col-md-6">
                      <p class="mb-2">
                          <i class="fas fa-tags me-2"></i><strong>Category:</strong>
                          <% if (book.genres && book.genres.length > 0) { %>
                              <%= book.genres.map(genre => genre.name).join(', ') %>
                          <% } else { %>
                              No genres available
                          <% } %>
                      </p>
                  </div>
              </div>
          </div>
      
          <!-- Description Section -->
          <div class="p-4 mb-4 border-bottom">
              <h5 class="fw-bold mb-3">Description</h5>
              <p class="text-muted mb-0"><%= book.description %></p>
          </div>
      
          <!-- Special Offers Section -->
          <div class="p-4 mb-4 border-bottom">
              <h5 class="fw-bold mb-3">Special Offers</h5>
              <% if (offers && offers.length > 0) { %>
                  <div class="offers-container">
                      <% offers.forEach(offer => { %>
                          <div class="offer-item p-3 border rounded mb-3 bg-light">
                              <div class="d-flex align-items-center mb-2">
                                  <i class="fas fa-tag text-primary me-2"></i>
                                  <h6 class="mb-0">
                                      <%= offer.discountValue %><%= offer.discountType === 'Percentage' ? '%' : '₹' %> OFF
                                  </h6>
                              </div>
                              <div class="offer-details">
                                  <% if (offer.offerType === 'Product') { %>
                                      <p class="mb-1"><small>On: <%= book.title %></small></p>
                                  <% } else if (offer.offerType === 'Category' && offer.category) { %>
                                      <p class="mb-1"><small>Category: <%= offer.category.name %></small></p>
                                  <% } else if (offer.offerType === 'Referral' && offer.referralCode) { %>
                                      <p class="mb-1"><small>Code: <%= offer.referralCode %></small></p>
                                  <% } %>
                                  <p class="mb-0 text-muted">
                                      <small>Valid: <%= new Date(offer.startDate).toLocaleDateString() %> - <%= new Date(offer.endDate).toLocaleDateString() %></small>
                                  </p>
                              </div>
                          </div>
                      <% }); %>
                  </div>
              <% } else { %>
                  <p class="text-muted mb-0">No active offers available for this book.</p>
              <% } %>
          </div>
      
          <!-- Format Selection Section -->
          <div class="p-4 mb-4 border-bottom">
              <h5 class="fw-bold mb-3">Available Formats</h5>
              <div class="d-flex flex-wrap gap-3">
                  <% if (book.formats && book.formats.length > 0) { %>
                      <% book.formats.forEach(function(format) { %>
                          <div class="form-check">
                              <input class="form-check-input" type="radio" name="bookFormat" id="<%= format %>" value="<%= format %>">
                              <label class="form-check-label" for="<%= format %>">
                                  <i class="fas fa-book me-1"></i><%= format %>
                              </label>
                          </div>
                      <% }); %>
                  <% } else { %>
                      <p class="text-muted mb-0">No formats available</p>
                  <% } %>
              </div>
          </div>
      
          <!-- Add to Cart Section -->
          <div class="p-4 mb-4 border-bottom">
              <div class="d-flex align-items-center justify-content-between">
                  <% if (book.quantity > 0) { %>
                      <form action="/cart" method="POST" class="d-flex align-items-center gap-3">
                          <input type="hidden" name="productId" value="<%= book.id %>">
                          <button type="submit" class="btn btn-primary">
                              <i class="fas fa-shopping-cart me-2"></i>Add to Cart
                          </button>
                      </form>
                  <% } else { %>
                      <button class="btn btn-secondary" disabled>
                          <i class="fas fa-ban me-2"></i>Out of Stock
                      </button>
                  <% } %>
              </div>
          </div>
      
          <!-- Social Share Section -->
          <div class="p-4">
              <div class="d-flex align-items-center">
                  <span class="me-3">Share on:</span>
                  <div class="d-flex gap-2">
                      <a class="btn btn-outline-primary btn-sm" href="#">
                          <i class="fab fa-facebook-f"></i>
                      </a>
                      <a class="btn btn-outline-info btn-sm" href="#">
                          <i class="fab fa-twitter"></i>
                      </a>
                      <a class="btn btn-outline-dark btn-sm" href="#">
                          <i class="fab fa-linkedin-in"></i>
                      </a>
                      <a class="btn btn-outline-danger btn-sm" href="#">
                          <i class="fab fa-pinterest"></i>
                      </a>
                  </div>
              </div>
          </div>
      </div>

        <div
        id="imageModal"
        style="
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          justify-content: center;
          align-items: center;
          z-index  : 1000;
        "
      >
        <div
          style="
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 60%;  /* Decreased the width */
            height: 60%; /* Decreased the height */
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
          "
        >
          <img
            id="modalImage"
            src=""
            alt="Book Image"
            style="width: 100%; height: auto; max-height: 100%; object-fit: contain; cursor: zoom-in;"
            onclick="toggleZoom()"
          />
          <button
            onclick="closeImageModal()"
            style="
              position: absolute;
              top: 10px;
              right: 10px;
              background: #ff4d4d;
              border: none;
              color: white;
              padding: 8px 16px;
              font-size: 16px;
              border-radius: 50%;
              cursor: pointer;
            "
          >
            &times;
          </button>
        </div>
      </div>
      
      </div>
    </div>

    <!-- Shop Detail End -->

    <div class="d-flex mb-3">
      <div class="text-primary mr-2">
        <% for (let i = 0; i < Math.floor(book.rating); i++) { %>
        <small class="fas fa-star"></small>
        <% } %> <% if (book.rating % 1 !== 0) { %>
        <small class="fas fa-star-half-alt"></small>
        <% } %> <% for (let i = Math.floor(book.rating); i < 5; i++) { %>
        <small class="far fa-star"></small>
        <% } %>
      </div>
     
    </div>
    <div class="container mt-5">
      <h3>Related Books</h3>
      <div class="row">
          <% relatedBooks.forEach((relatedBook) => { %>
              <div class="col-lg-3 col-md-4 col-sm-6 pb-3">
                  <div class="card border-0 h-100">
                      <div class="card-header product-img position-relative overflow-hidden bg-transparent border p-0">
                          <% if (relatedBook.images && relatedBook.images.length > 0) { %>
                              <img class="img-fluid w-100" src="/uploads/<%= relatedBook.images[0].split('/').pop() %>" alt="<%= relatedBook.title %>">
                          <% } else { %>
                              <img class="img-fluid w-100" src="/path/to/placeholder.jpg" alt="No Image Available">
                          <% } %>
                      </div>
                      <div class="card-body text-center p-2">
                          <h6 class="text-truncate mb-2"><%= relatedBook.title %></h6>
                          <p class="text-muted"><%= relatedBook.author %></p>
                          <h6>₹<%= relatedBook.salesPrice %></h6>
                      </div>
                      <div class="card-footer text-center bg-light p-1">
                          <a href="/book/<%= relatedBook._id %>" class="btn btn-sm btn-outline-primary">View Details</a>
                      </div>
                  </div>
              </div>
          <% }) %>
      </div>
  </div>
  
    <!-- Products Start -->

    <!-- Products End -->

    <!-- Footer Start -->
    <div class="container-fluid bg-secondary text-dark mt-5 pt-5">
      <div class="row px-xl-5 pt-5">
        <div class="col-lg-4 col-md-12 mb-5 pr-3 pr-xl-5">
          <a href="" class="text-decoration-none">
            <h1 class="mb-4 display-5 font-weight-semi-bold">
              <span class="text-primary font-weight-bold border border-white px-3 mr-1">B</span
              >OOKLY
            </h1>
          </a>
          <p>
            Discover stories and knowledge in every book.From timeless classics to trending new
            releases, Bookly brings you the best selection.Your next great read is just a click
            away!.
          </p>
          <p class="mb-2">
            <i class="fa fa-map-marker-alt text-primary mr-3"></i>123 Street, New York, USA
          </p>
          <p class="mb-2"><i class="fa fa-envelope text-primary mr-3"></i>info@example.com</p>
          <p class="mb-0"><i class="fa fa-phone-alt text-primary mr-3"></i>+012 345 67890</p>
        </div>
        <div class="col-lg-8 col-md-12">
          <div class="row">
            <div class="col-md-4 mb-5">
              <h5 class="font-weight-bold text-dark mb-4">Quick Links</h5>
              <div class="d-flex flex-column justify-content-start">
                <a class="text-dark mb-2" href="/"
                  ><i class="fa fa-angle-right mr-2"></i>Home</a
                >
                <a class="text-dark mb-2" href="/shop"
                  ><i class="fa fa-angle-right mr-2"></i>Our Shop</a
                >
                <a class="text-dark mb-2" href="/details"
                  ><i class="fa fa-angle-right mr-2"></i>Shop Detail</a
                >
                <a class="text-dark mb-2" href="/cart"
                  ><i class="fa fa-angle-right mr-2"></i>Shopping Cart</a
                >
                <a class="text-dark mb-2" href="/checkout"
                  ><i class="fa fa-angle-right mr-2"></i>Checkout</a
                >
                <a class="text-dark" href="/contact"
                  ><i class="fa fa-angle-right mr-2"></i>Contact Us</a
                >
              </div>
            </div>
            <div class="col-md-4 mb-5">
              <h5 class="font-weight-bold text-dark mb-4">Quick Links</h5>
              <div class="d-flex flex-column justify-content-start">
                <a class="text-dark mb-2" href="/"
                  ><i class="fa fa-angle-right mr-2"></i>Home</a
                >
                <a class="text-dark mb-2" href="/shop"
                  ><i class="fa fa-angle-right mr-2"></i>Our Shop</a
                >
                <a class="text-dark mb-2" href="/detail"
                  ><i class="fa fa-angle-right mr-2"></i>Shop Detail</a
                >
                <a class="text-dark mb-2" href="/cart"
                  ><i class="fa fa-angle-right mr-2"></i>Shopping Cart</a
                >
                <a class="text-dark mb-2" href="/checkout"
                  ><i class="fa fa-angle-right mr-2"></i>Checkout</a
                >
                <a class="text-dark" href="/contact"
                  ><i class="fa fa-angle-right mr-2"></i>Contact Us</a
                >
              </div>
            </div>
            <div class="col-md-4 mb-5">
              <h5 class="font-weight-bold text-dark mb-4">Newsletter</h5>
              <form action="">
                <div class="form-group">
                  <input
                    type="text"
                    class="form-control border-0 py-4"
                    placeholder="Your Name"
                    required="required"
                  />
                </div>
                <div class="form-group">
                  <input
                    type="email"
                    class="form-control border-0 py-4"
                    placeholder="Your Email"
                    required="required"
                  />
                </div>
                <div>
                  <button class="btn btn-primary btn-block border-0 py-3" type="submit">
                    Subscribe Now
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="row border-top border-light mx-xl-5 py-4">
        <div class="col-md-6 px-xl-0">
          <p class="mb-md-0 text-center text-md-left text-dark">
            &copy; <a class="text-dark font-weight-semi-bold" href="#">BOOKLY</a>. All Rights
            Reserved. Designed by
          </p>
        </div>
        <div class="col-md-6 px-xl-0 text-center text-md-right">
          <img class="img-fluid" src="img/payments.png" alt="" />
        </div>
      </div>
    </div>
    <!-- Footer End -->

    <!-- Back to Top -->
    <a href="#" class="btn btn-primary back-to-top"><i class="fa fa-angle-double-up"></i></a>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Contact Javascript File -->
    <script src="mail/jqBootstrapValidation.min.js"></script>
    <script src="mail/contact.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    
    <script>
      function showImageModal(imageUrl) {
        const modal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        modalImage.src = imageUrl;
        modal.style.display = 'flex'; // Show modal
      }

      function closeImageModal() {
        const modal = document.getElementById('imageModal');
        modal.style.display = 'none'; // Hide modal
      }
    </script>
    <script>

      document.addEventListener('DOMContentLoaded', () => {
        class ImageZoom {
          constructor() {
            // Get elements by ID since that's how they're defined in the HTML
            this.container = document.querySelector('.zoom-container');
            this.image = document.getElementById('main-image');
            this.lens = document.getElementById('zoom-lens');
            this.result = document.getElementById('zoom-result');
  
            // Validate required elements
            if (!this.container || !this.image || !this.lens || !this.result) {
              console.error('Missing required elements:', {
            container: !this.container,
            image: !this.image,
            lens: !this.lens,
            result: !this.result
          });
          return;
        }
  
        // Initialize if image is already loaded or wait for load
        if (this.image.complete) {
          this.initialize();
        } else {
          this.image.addEventListener('load', () => this.initialize());
        }
      }
  
      initialize() {
        // Bind methods to preserve 'this' context
        this.showZoom = this.showZoom.bind(this);
        this.hideZoom = this.hideZoom.bind(this);
        this.moveLens = this.moveLens.bind(this);
  
        // Add event listeners
        this.container.addEventListener('mouseenter', this.showZoom);
        this.container.addEventListener('mouseleave', this.hideZoom);
        this.container.addEventListener('mousemove', this.moveLens);
        
        // Calculate zoom ratio based on image and result dimensions
        this.zoomRatio = this.calculateZoomRatio();
      }
      
      calculateZoomRatio() {
        // Get the natural dimensions of the image
        const naturalWidth = this.image.naturalWidth;
        const naturalHeight = this.image.naturalHeight;
        
        // Get the displayed dimensions of the image
        const displayedWidth = this.image.offsetWidth;
        const displayedHeight = this.image.offsetHeight;
        
        // Calculate the ratio between natural and displayed size
        return Math.max(naturalWidth / displayedWidth, naturalHeight / displayedHeight);
      }
      
      showZoom() {
        if (!this.lens || !this.result || !this.image) return;
        
        try {
          this.lens.style.display = 'block';
          this.result.style.display = 'block';
          
          // Position the result div relative to the container
          const containerRect = this.container.getBoundingClientRect();
          this.result.style.left = `${containerRect.right + 10}px`;
          this.result.style.top = `${containerRect.top}px`;
          
          // Set the zoom result background
          this.result.style.backgroundImage = `url(${this.image.src})`;
        } catch (error) {
          console.error('Error in showZoom:', error);
          this.hideZoom();
        }
      }
  
      hideZoom() {
        if (!this.lens || !this.result) return;
        
        try {
          this.lens.style.display = 'none';
          this.result.style.display = 'none';
        } catch (error) {
          console.error('Error in hideZoom:', error);
        }
      }
      
      moveLens(e) {
        if (!this.image || !this.lens || !this.result) return;
        
        try {
          const rect = this.image.getBoundingClientRect();
          const lensWidth = this.lens.offsetWidth;
          const lensHeight = this.lens.offsetHeight;
          
          // Calculate cursor position relative to the image
          let mouseX = e.pageX - rect.left - window.pageXOffset;
          let mouseY = e.pageY - rect.top - window.pageYOffset;
  
          // Calculate lens position
          let lensX = mouseX - lensWidth / 2;
          let lensY = mouseY - lensHeight / 2;
          
          // Prevent lens from going outside image bounds
          lensX = Math.max(0, Math.min(lensX, rect.width - lensWidth));
          lensY = Math.max(0, Math.min(lensY, rect.height - lensHeight));
          
          // Position the lens
          this.lens.style.left = `${lensX}px`;
          this.lens.style.top = `${lensY}px`;
          
          // Calculate and set background position for result
          const bgX = (lensX / rect.width) * 100;
          const bgY = (lensY / rect.height) * 100;
          this.result.style.backgroundPosition = `${bgX}% ${bgY}%`;
          
          // Update background size to match zoom level
          const bgWidth = rect.width * 2;
          const bgHeight = rect.height * 2;
          this.result.style.backgroundSize = `${bgWidth}px ${bgHeight}px`;
        } catch (error) {
          console.error('Error in moveLens:', error);
        }
      }
    }
    
    // Initialize the zoom functionality
    try {
      new ImageZoom();
      console.log('Zoom initialized successfully');
    } catch (error) {
      console.error('Error initializing zoom:', error);
    }
  });
  </script>
  </body>
</html>
